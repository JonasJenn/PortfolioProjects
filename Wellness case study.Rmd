---
title: "Wellness Case Study"
author: "Jennifer Jonas"
date: "2022-08-29"
output: html_document
---  
## Topic - How can a wellness company play it smart?

## About Bellabeat
Bellabeat is a high-tech company that manufactures health-focused smart products.The Bellabeat app provides users with health data related to their activity, sleep, stress, menstrual cycle, and mindfulness habits. This data can help users better understand their current habits and make healthy decisions. The Bellabeat app connects to their line of smart wellness products.

## Ask
Business Task - To analyze smart device usage data in order to gain insights into how consumers use non-Bellabeat smart devices. 

### Questions to be answered 
* What are some trends in smart device usage?
* How could these trends apply to Bellabeat customers?
* How could these trends help influence Bellabeat marketing strategy?

## Prepare
Data Source: 30 participants FitBit Fitness Tracker Data from Mobius <https://www.kaggle.com/arashnic/fitbit>

The dataset has 18 CSV files. The data also follows a ROCCC approach:

- Reliability: The data is from 30 FitBit users who consented to the submission of personal tracker data and generated by from a distributed survey via Amazon Mechanical Turk.
- Original: The data is from 30 FitBit users who consented to the submission of personal tracker data via Amazon Mechanical Turk.
- Comprehensive: Data minute-level output for physical activity, heart rate, and sleep monitoring. While the data tracks many factors in the user activity and sleep, but the sample size is small and most data is recorded during certain days of the week.
- Current: Data is from March 2016 to May 2016. Data is not current so the users habit may be different now.
- Cited: Unknown
The dataset has limitations but can still be used for analysis. 

## Process
### Setting up my envirionment 
Notes: Setting up my R environment by loading necessary packages:
```{r loading packages}
library(tidyverse)
```
```{r}
library(lubridate)
```
```{r}
library(ggplot2)
```
```{r}
library(skimr)
```
```{r}
library(janitor)
```
```{r}
library(dplyr)
```

### Import data files necessary for analysis
Notes: Previewed my data files in excel before importing and noticed that the daily intensities, daily calories and daily steps files are already present as columns in the daily activity file so I excluded them. Imported necessary csv files and create data frames using the `read.csv()` function:
```{r importing dataset dailyactivity_merged.csv}
daily_activity <- read.csv("Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
```
```{r import dataset sleepday_merged.csv}
daily_sleep <- read.csv("Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
```
```{r import dataset weighLogInfo_merged.csv}
weight_log <- read.csv("Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
```

### Unique users
Check the amount of users that participated in the survey to crosscheck as per data provided using the `n_distinct()` function:
```{r}
n_distinct(daily_activity$Id)
```
```{r}
n_distinct(daily_sleep$Id)
```
```{r}
n_distinct(weight_log$Id)
```
From the results we see:

- 33 users provided info on all daily activity metrics
- 24 users provided info on all daily sleep metrics 
- 8 users provided info on weight metrics. Not enough users in the weight_log data frame to make substantial analysis so we drop this data frame.

### Explore dataframes
Notes: Preview and explore data frames using the `glimpse()` function:
```{r}
glimpse(daily_activity)
```
```{r}
glimpse(daily_sleep)
```


## Clean data frames
### Check for null values 
Notes: First we check for sum of null values in each data frame using the `is.na()` function:
```{r}
daily_activity %>% 
  is.na() %>%
  sum()
```
```{r}
daily_sleep %>% 
  is.na() %>%
  sum()
```
From the results we find no null values in both data frames 

### Check for duplicate values
Notes: Then we check for duplicates in each data frame using the `duplicated()` function:
```{r}
sum(duplicated(daily_activity))
```
```{r}
sum(duplicated(daily_sleep))
```
From the results we see that data frame daily_sleep has 3 duplicate values so we remove them:
```{r}
daily_sleep <- dplyr::distinct(daily_sleep)
```
Now duplicate values are removed. You can use the `duplicated` function to check again
```{r}
sum(duplicated(daily_sleep))
```

### Ensure columns are stored in right data type
Notes: Activity date column in daily_activity df and sleep day column in daily_sleep df are stored as character instead of date so we change that:
```{r}
daily_activity$ActivityDate <-as.Date(daily_activity$ActivityDate, format="%m/%d/%Y")
```
```{r}
daily_sleep$SleepDay<- as.Date(daily_sleep$SleepDay, format="%m/%d/%Y")
```
Now columns are stored in right data type. Confirm columns are updated using `glimpse()` function:
```{r}
glimpse(daily_activity)
```
```{r}
glimpse(daily_sleep)
```

### Ensure consistency in column names 
Notes: We rename the sleep day column in the daily_sleep data frame and the activity date column in daily_activity data frame to date using the `rename()` function:
```{r}
daily_activity <- daily_activity %>% 
  rename(Date = ActivityDate)
```
```{r}
daily_sleep <- daily_sleep %>% 
  rename(Date = SleepDay)
```
Confirm columns are updated using the `head()` function:
```{r}
head(daily_activity)
```
```{r}
head(daily_sleep)
```

## Analyze 
### Get summary of data frames
Notes: Get quick summary of data frames using the `summary()` function:
```{r}
summary(daily_activity)
```
```{r}
summary(daily_sleep)
```
From the summary of daily activity:

- The average steps per day is 7638 which is lower than the required 10,000 steps per day according to <https://www.healthline.com/health/average-steps-per-day>

- The average distance is 5.49km which is lower than the required 8km per day according to this <https://www.medicalnewstoday.com>

- The average sedentary minutes is 991.2 minutes (17hrs) which is way higher than the required 6 hours according to <https://www.healthywa.wa.gov.au/Articles/S_T/Sedentary-behaviour>

- The average active minutes is 21.16 which is lower than the expected 30 mins according to this <https://www.mayoclinic.org>

From the summary of daily sleep:

- The average total minutes asleep is 433 minutes (7.2hrs) which is very good according to <https://www.mayoclinic.org/healthy-lifestyle/adult-health/expert-answers/how-many-hours-of-sleep-are-enough/faq-20057898>

- The average time in bed is 458 minutes (7.6hrs)

### Create new column weekday
Notes: Create a weekday column that will be used for visualizations using the `weekdays()` function
```{r}
daily_activity$Weekday <- weekdays(daily_activity$Date)
```
```{r}
daily_sleep$Weekday <- weekdays(daily_sleep$Date)
```
Preview data frames using the `head()` function
```{r}
head(daily_activity)
```
```{r}
head(daily_sleep)
```

## Share - Plot explorations 
### Relationship between total steps and calories
Notes: Show the effect steps has on calories using the `ggplot()` function
```{r}
ggplot(data = daily_activity, aes(x= TotalSteps, y= Calories)) +
  geom_point(shape="circle", color = "orange") +
  stat_smooth(method = lm) +
  labs(title = "Relationship Between Total Steps VS Calories", 
       caption = "Increase in steps increases the number of calories burnt")
```

### Relationship between very active minutes and calories
Notes: Show the effect active minutes has on calories
```{r}
ggplot(data = daily_activity, aes(x= VeryActiveMinutes, y=  Calories)) +
  geom_point(shape= "circle", color = "#319DA0") +
  stat_smooth(method = lm) +
  labs(title = "Relationship Between Total Distance VS Calories",
       caption = "The more active minutes the more calories burnt")
```

### Showing active days 
Notes: Visualizing the days users recorded their metrics more
```{r}
daily_activity$Weekday <- ordered(daily_activity$Weekday, levels=c("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"))

ggplot(data = daily_activity) +
  geom_bar(mapping = aes(x = Weekday), fill= "#E94560") +
  labs(title = "Number of times users logged in", x= "Day of the week", y= "Frequency",
       caption = "Users are more active on Tuesdays to Thursdays")
```

### Percentage of activity in minutes
Notes: First get the sum of individual minute columns
```{r}
Activity_min <- daily_activity %>% 
  summarise(VAM = sum(VeryActiveMinutes), FAM = sum(FairlyActiveMinutes), SM = sum(SedentaryMinutes), 
            LAM = sum(LightlyActiveMinutes))
```
```{r}
head(Activity_min)
```
Now we have the sum of individual minute columns we can plot our pie chart
```{r}
slices <- c(19895, 12751, 931738, 181244)
piepercent <- round(100*slices / sum(slices), 1)
colors = c("red","blue","#00B8A9","#FCE38A")
 
pie(slices,labels = paste0(piepercent,"%"),col=colors,main = "Percentage of Activity in Minutes")
legend("bottomright",c("VeryActiveMinutes","FairlyActiveMinutes","SedentaryMinutes",
                       "LightlyActiveMinutes"),cex=0.5,fill = colors)
```

- Sedentary minutes takes the biggest slice at 81.10%
- The App is rarely used to track fitness such as running according to the minor percentage of Fairly Active minutes  (1.11%) and Very Active minutes (1.73%)

### Relationship between total time in bed and total minutes asleep
Notes: Show correlation between time in bed and time asleep
```{r}
ggplot(data = daily_sleep, aes(x= TotalMinutesAsleep, y=  TotalTimeInBed)) +
  geom_point(shape= "circle", color = "#277BC0") +
  stat_smooth(method = lm) +
  labs(title = "Relationship Between Total Time in Bed VS Total Minutes Asleep")
```

There is a positive correlation between total time in bed and total minutes asleep

## Act
In the final step, we will be delivering our insights and providing recommendations based on our analysis. Here, we revisit our business questions and share with our high-level business recommendations.

### What are some trends in smart device usage?
- Majority of users (81.10%) are using the FitBit app to track sedentary activities and not using it to track their health habits
- Users prefer to track their activities during weekdays as compared to weekends. Perhaps because they spend more time outside on weekdays and stay in on weekends
- Most users log in their calories, steps taken, etc, and fewer log their sleep data
- There is a positive correlation between calories, steps taken and very active minutes
- There are users who are sleeping less than 7 hours which is not good 

### How could these trends apply to Bellabeat customers?
Products developed are focused on providing women with their health, habit and fitness data and encouraging them to understand their current habits and make healthy decisions. These common trends surrounding health and fitness can very well be applied to Bellabeat customers. Bellabeat could easily market these products to costumers by telling them smart-devices could help them start their journey by measuring and tracking all health metrics and the benefit to their health and lifestyle.

### How could these trends help influence Bellabeat marketing strategy?
It is well documented that moderate-to-vigorous physical activity is protective against chronic disease and self-monitoring of behavior is one of the most robust behavior-change techniques available. 

Bellabeat marketing team can:

- Encourage users by educating and equipping them with knowledge about fitness benefits, suggest different types of exercise such as a simple 15 minutes exercise on weekday and a more intense exercise on weekend
- Prompt notification to encourage users to exercise. By marketing these devices to consumers, Bellabeat provides a unique opportunity for individuals to change their behavior, become more physically active and increase their life expectancy
- Prompt notification to encourage users to have atleast 7 hours of sleep as this is crucial for a healthy lifestyle
